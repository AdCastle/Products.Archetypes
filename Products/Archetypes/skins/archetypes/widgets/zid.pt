<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="plone">

<body>

    <!-- Id/NameWidgets -->
    
    <div metal:define-macro="view">
      <tal:block tal:condition="python: here.portal_membership.getAuthenticatedMember().getProperty('visible_ids')">
      <div metal:use-macro="here/widgets/field/macros/view">
	<div metal:fill-slot="widget_view">
	  <span tal:replace="structure accessor"/>
	</div>
      </div>
      </tal:block>
    </div>

    <metal:define define-macro="edit">
    <div class="row" tal:define="value python:request.get(fieldName, accessor())">
        <tal:block tal:condition="python: here.portal_membership.getAuthenticatedMember().getProperty('visible_ids')">
	<div tal:attributes="class python:test(field.required, 'required
	  label', 'label')">
	     <span i18n:translate="" tal:content="python:widget.Label(here)"></span>
             <div id="title_help" class="help" style="visibility: hidden;"
                  tal:content="python:widget.Description(here)"
                  tal:attributes="id string:${fieldName}_help">Help tooltip</div>
        </div>
	<div class="field"
	     tal:define="error errors/fieldName | nothing;"
	     tal:attributes="class python:test(error, 'field error', 'field')" >
	     <span tal:condition="error" tal:replace="error" />
	     <input type="text" 
	            name="" 
		    value="" 
		    size="30" 
		    tabindex="#"
		    tal:attributes="name fieldName;
		    value value;
		    tabindex tabindex/next;
                    onfocus string:formtooltip('${fieldName}_help',1);
                    onblur string:formtooltip('${fieldName}_help',0);
             "/>
	 </div>
         </tal:block>
         <tal:block  tal:condition="python:not here.portal_membership.getAuthenticatedMember().visible_ids">
	 <input type="hidden" tal:attributes="name fieldName; value value;"/>
         </tal:block>
    </div>
    </metal:define>

  </body>
  
</html>

