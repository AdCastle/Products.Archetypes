<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<div metal:fill-slot="main">
    <tal:main-macro metal:define-macro="main">
        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <div class="vevent">

        <h1 tal:define="field python:context.getField('title');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-title kukit-widgetstate-view;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
            id="archetypes-fieldname-title"
            tal:content="object_title"
            tal:attributes="class string:documentFirstHeading summary$kukitattrs;">
          Title or id
        </h1>

        <div class="eventDetails vcard">
        <table class="vertical listing"
               summary="Event details" i18n:attributes="summary summary_event_details;">

            <tbody>
                <tr>
                    <th i18n:translate="event_what">What</th>
                    <td tal:content="python:modules['string'].join(here.Subject(), ' ')">
                        Conference
                    </td>
                </tr>
                <tr>
                    <th i18n:translate="event_when">When</th>
                    <td>
                        <tal:differentday tal:condition="python:not here.start().Date() == here.end().Date()">
                            <abbr class="dtstart"
                
                                  tal:content="python:here.toLocalizedTime(here.start(), long_format=1)"
                                  tal:define="field python:context.getField('startDate');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-startDate kukit-widgetstate-view;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
                        id="archetypes-fieldname-startDate"
                        tal:attributes="class string: summary$kukitattrs;
                        title python:here.start()">
                                Start Date Time
                            </abbr>
                            <span i18n:translate="event_to">to</span> <br />
                            <abbr class="dtend"
                                  tal:attributes="title python:here.end()"
                                  tal:content="python:here.toLocalizedTime(here.end(), long_format=1)">
                                End Date Time
                            </abbr>
                        </tal:differentday>

                        <tal:sameday tal:condition="python:here.start().Date() == here.end().Date()"
                                     tal:define="ampm python:site_properties.getProperty('localLongTimeFormat').find('%p') >= 0">
                            <abbr class="dtstart"
                                  style="display: none;"             
                                  tal:content="python:here.toLocalizedTime(here.start(), long_format=1)"
                                  tal:define="field python:context.getField('startDate');
                                  writable python:field.writeable(context);
                                  kukitclasses string:kukit-atfieldname-startDate kukit-widgetstate-view;
                                  kukitattrs python:test(writable, ' ' + kukitclasses, '');"
                                  id="archetypes-fieldname-startDate"
                                  tal:attributes="class string: summary$kukitattrs;
                                  title python:here.start()">
                                Start Date Time
                            </abbr>
                            <abbr class="dtend"
                                  style="display: none;"
                                  tal:attributes="title python:here.end()"
                                  tal:content="python:here.toLocalizedTime(here.end(), long_format=1)">
                                End Date Time
                            </abbr>
                            <span tal:replace="python:toLocalizedTime(here.start())">Start Date Time</span> <br />
                            <span i18n:translate="event_from">from</span>
                            <span tal:replace="python:test(ampm, here.start().AMPMMinutes(), here.start().TimeMinutes())">Start Time</span>
                            <span i18n:translate="event_to">to</span>
                            <span tal:replace="python:test(ampm, here.end().AMPMMinutes(), here.end().TimeMinutes())">End Time</span>
                        </tal:sameday>

                    </td>
                </tr>
                <tr tal:condition="here/location">
                    <th i18n:translate="event_where">Where</th>
                    <td class="location" tal:content="here/location"
                        tal:define="field python:context.getField('location');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-location kukit-widgetstate-view;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
                        id="archetypes-fieldname-location"
                        tal:attributes="class string: summary$kukitattrs;"
>Oslo, Norway</td>
                </tr>
                <tr tal:condition="here/contact_name">
                    <th i18n:translate="contact_name">Contact Name</th>
                    <td class="fn"
                        tal:content="here/contact_name"
                        tal:define="field python:context.getField('contactName');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-contactName kukit-widgetstate-view;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
                        id="archetypes-fieldname-contactName"
                        tal:attributes="class string: summary$kukitattrs;">John Smith</td>
                </tr>
                <tr tal:define="contact_email here/contact_email"
                    tal:condition="here/contact_email">
                    <th i18n:translate="contact_email">Contact Email</th>
                    <td class="email">
                    <input type="button" value="edit"
                        tal:define="field python:context.getField('contactEmail');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-contactEmail  kssExplicitEdit;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');" 
                        tal:attributes="class string: summary$kukitattrs;"       
                      >
                        <a tal:content="structure python: here.spamProtect(contact_email)"
                        id="archetypes-fieldname-contactEmail"
                          />
                    </td>
                </tr>
                <tr tal:condition="here/contact_phone">
                    <th i18n:translate="contact_phone">Contact Phone</th>
                    <td class="tel"
                        tal:content="here/contact_phone"
                        tal:define="field python:context.getField('contactPhone');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-contactPhone kukit-widgetstate-view;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
                        id="archetypes-fieldname-contactPhone"
                        tal:attributes="class string: summary$kukitattrs;">555-GET-PLONE</td>
                </tr>
                <tr tal:condition="here/getAttendees|nothing">
                    <th i18n:translate="contact_attendees">Attendees</th>
                    <td tal:content="python: ', '.join(here.getAttendees())"
                    tal:define="field python:context.getField('attendees');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-attendees kukit-widgetstate-view;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
                        id="archetypes-fieldname-attendees"
                        tal:attributes="class string: summary$kukitattrs;">Person 1, Person 2</td>
                </tr>
                <tr>
                    <th i18n:translate="heading_add_to_calendar">Add event to calendar</th>
                    <td>
                        <a href="#"
                           tal:attributes="href string:$here_url/vcs_view"
                           title="Add this item to your vCal calendar"
                           i18n:attributes="title title_add_to_vcal;">
                            <img tal:replace="structure here/icon_export_vcal.png" src="" alt="" />
                            <span i18n:translate="label_add_to_vcal">vCal</span></a><br />
                        <a href="#"
                           tal:attributes="href string:$here_url/ics_view"
                           title="Add this item to your iCal calendar"
                           i18n:attributes="title title_add_to_ical;">
                            <img tal:replace="structure here/icon_export_ical.png" src="" alt="" />
                            <span i18n:translate="label_add_to_ical">iCal</span></a>
                    </td>
                </tr>
            </tbody>
        </table>
        </div>

        <div metal:use-macro="here/document_byline/macros/byline">
            Get the byline - contains details about author and modification date.
        </div>

        <p  metal:use-macro="here/azax_macros_generic/macros/generic_description_view">
            Description
        </p>

        <div tal:condition="here/getText|nothing">
            <div tal:replace="structure here/getText" />
        </div>

        <p tal:condition="here/event_url|nothing">
            <input type="button" value="edit"
                        tal:define="field python:context.getField('eventUrl');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-eventUrl  kssExplicitEdit;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');" 
                        tal:attributes="class string: summary$kukitattrs;"       
                      >
            <a class="url"
               href="event_url" 
               i18n:translate="event_more_information"
               tal:define="field python:context.getField('eventUrl');"                    
                        id="archetypes-fieldname-eventUrl"
                        tal:attributes="href here/event_url">
               More information about this event&hellip;</a>
        </p>

        </div>

        <div metal:use-macro="here/document_relateditems/macros/relatedItems">
            show related items if they exist
        </div>

        <div class="visualClear" id="clear-space-after-relatedItems"><!-- --></div>

    </tal:main-macro>
</div>

</body>
</html>
