<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<div metal:fill-slot="main">
    <tal:main-macro metal:define-macro="main"
          tal:define="text python:here.CookedBody(stx_level=2);
                      len_text python:len(text.strip())">
        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <h1 metal:use-macro="here/azax_macros_generic/macros/generic_title_view">
          Title or id
        </h1>

        <div metal:use-macro="here/document_byline/macros/byline">
            Get the byline - contains details about author and modification date.
        </div>

        <p  metal:use-macro="here/azax_macros_generic/macros/generic_description_view">
            Description
        </p>

        <div class="newsImageContainer"
             tal:condition="here/image_mini|nothing">
             <input type="button" value="edit"
             tal:define="field python:context.getField('image');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-image  kssExplicitEdit;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
            
            tal:attributes="class string: summary$kukitattrs;"       
             >
            <a href="#"
               tal:attributes="href string:$here_url/image/image_view_fullscreen"
               id="archetypes-fieldname-image">
               <span tal:content="structure python: here.tag(scale='mini', css_class='newsImage')" src="" alt=""
                >
       
               </span>
            </a>
            <p class="discreet"
                  tal:content="here/getImageCaption"
                  tal:define="field python:context.getField('imageCaption');
                        writable python:field.writeable(context);
                        kukitclasses string:kukit-atfieldname-imageCaption kukit-widgetstate-view;
                        kukitattrs python:test(writable, ' ' + kukitclasses, '');"
            id="archetypes-fieldname-imageCaption"
            tal:attributes="class string: summary$kukitattrs;">Image Caption</p>
        </div>

        <p tal:condition="python: not len_text and is_editable"
           i18n:translate="no_body_text"
           class="discreet">
            This item does not have any body text, click the edit tab to change it.
        </p>

        <div class="stx"
             tal:condition="text"
             tal:attributes="class python:test(here.Format() in ('text/structured',
                                                   'text/x-rst', ), 'stx', 'plain')">
            <div tal:replace="structure text" />
        </div>

        <div metal:use-macro="here/document_relateditems/macros/relatedItems">
            Show related items if they exist
        </div>
        
        <div class="visualClear" id="clear-space-after-relatedItems"></div>

    </tal:main-macro>
</div>

</body>
</html>

