<html>
  <div tal:replace="structure here/manage_page_header"/>
    <body bgcolor="#ffffff" link="#000099" alink="#000099" vlink="#000099">
      <div tal:replace="structure here/manage_tabs"/>
	<style type="text/css">
	  td {
	     vertical-align: top;
	  }
	  
	</style>
	
	<form action="manage_templates" method="POST" 
	      tal:define="at here/archetype_tool;
	                  templates at/listTemplates;
			  vocab python:templates;
	                 ">

	
    <table class="main">
	<tr tal:repeat="meta_type python: at.listRegisteredTypes(1)">
   
	  <tal:condition condition="python:at.isTemplateEnabled(meta_type['klass'])">
	  <td tal:content="string: ${meta_type/package}:${meta_type/name}">TYPE</td>
	  <td>
	    <select multiple="multiple"
	      tal:define="value python:at.lookupTemplates(meta_type['name']);"
		tal:attributes="name string:template_names_${meta_type/name}:list;
		                size python: len(vocab)">
	      <option selected=""
		tal:repeat="item vocab"
		tal:attributes="value item;
		selected python:test(item in value, 'selected', None);"
		tal:content="item"/>
	    </select>

          </td>
	 </tal:condition>
	</tr>
    <tr>
       <td><input type="submit" name="submit" value="Update Bindings"/></td>
       <td>&nbsp;</td>
    </tr>
    <tr>
       <td>&nbsp;</td>
       <td>&nbsp;</td>
    </tr>
	<tr>
       <td>Add a new template</td>
	   <td>	
           <input type="text" name="newTemplate"/>
       </td>
	</tr>
    <tr>
       <td><input type="submit" name="addTemplate" value="Add Template"/></td>
       <td>&nbsp;</td> 
    </tr>
    </table>
      
      
      
      
      
    </form>

      </body>
  </html>